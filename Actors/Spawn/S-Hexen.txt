//==============================================================================
// HEXEN
//==============================================================================

ACTOR BishopReplacer : DoomImpSpawner replaces Bishop 
{
	Game Hexen
	SpawnID 19
	States
	{
		SetHexen1:
			TNT1 A 1 A_SpawnItemEx("Bishop3Doom",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG|SXF_NOCHECKPOSITION|SXF_TRANSFERSPECIAL|SXF_TRANSFERPOINTERS,0,tid)
			Goto DeathForInvasion			
	}		
} 	
ACTOR CentaurReplacer : DemonSpawner replaces Centaur { Game Hexen SpawnID 1 }
ACTOR CentaurMashReplacer : DemonSpawner replaces CentaurMash { Game Hexen SpawnID 103 }
ACTOR CentaurLeaderReplacer : SpectreSpawner replaces CentaurLeader { Game Hexen SpawnID 2 }
ACTOR Demon1Replacer : HellKnightSpawner replaces Demon1 { Game Hexen SpawnID 3 }
ACTOR Demon2Replacer : BaronOfHellSpawner replaces Demon2 { }
ACTOR Demon1MashReplacer : HellKnightSpawner replaces Demon1Mash { Game Hexen SpawnID 100 }
ACTOR Demon2MashReplacer : BaronOfHellSpawner replaces Demon2Mash { Game Hexen SpawnID 101 }
ACTOR EttinReplacer : RandomSpawner replaces Ettin 
{
	Game Hexen
	SpawnID 4
	DropItem "EttinSpawner1", 256, 1
	DropItem "EttinSpawner2", 256, 1
	DropItem "EttinSpawner3", 256, 1
}
ACTOR EttinMashReplacer : EttinReplacer replaces EttinMash { Game Hexen SpawnID 102 }
ACTOR EttinSpawner1 : ZombiemanSpawner {}
ACTOR EttinSpawner2 : DoomImpSpawner 
{
	States
	{
		SetHexen1:
			TNT1 A 1 A_SpawnItemEx("Ettin3Doom",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG|SXF_NOCHECKPOSITION|SXF_TRANSFERSPECIAL|SXF_TRANSFERPOINTERS,0,tid)
			Goto DeathForInvasion			
	}		
} 	
ACTOR EttinSpawner3 : ShotgunGuySpawner { }
ACTOR FireDemonReplacer : LostSoulSpawner replaces FireDemon { Game Hexen SpawnID 5 }
ACTOR IceGuyReplacer : RevenantSpawner replaces IceGuy { Game Hexen SpawnID 20 }
ACTOR SerpentReplacer : ShotgunGuySpawner replaces Serpent 
{
	Game Hexen
	SpawnID 6
	States
	{
		SetCatacomb:
			TNT1 A 1 A_SpawnItemEx("CatacombAbyss_WaterTroll",0,0,0,0,0,0,0,SXF_SETMASTER|SXF_NOCHECKPOSITION|SXF_TRANSFERAMBUSHFLAG)
			Goto DeathForInvasion	
		SetHexen1:
			TNT1 A 1 A_SpawnItemEx("Serpent3",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG|SXF_NOCHECKPOSITION|SXF_TRANSFERSPECIAL|SXF_TRANSFERPOINTERS,0,tid)
			Goto DeathForInvasion			
	}		
} 
ACTOR SerpentLeaderReplacer : ChaingunGuySpawner replaces SerpentLeader
{
	Game Hexen
	SpawnID 7
	States
	{
		SetCatacomb:
			TNT1 A 1 A_SpawnItemEx("CatacombAbyss_WaterTroll",0,0,0,0,0,0,0,SXF_SETMASTER|SXF_NOCHECKPOSITION|SXF_TRANSFERAMBUSHFLAG)
			Goto DeathForInvasion	
		SetHexen1:
			TNT1 A 1 A_SpawnItemEx("SerpentLeader3",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG|SXF_NOCHECKPOSITION|SXF_TRANSFERSPECIAL|SXF_TRANSFERPOINTERS,0,tid)
			Goto DeathForInvasion			
	}		
} 
ACTOR WraithReplacer : CacodemonSpawner replaces Wraith { Game Hexen SpawnID 8 }
ACTOR WraithBuriedReplacer : PainElementalSpawner replaces WraithBuried { Game Hexen SpawnID 9 }
ACTOR ClericBossReplacer : ArchvileSpawner replaces ClericBoss
{
	states
	{
		SetHexen1:
			TNT1 A 1 A_SpawnItemEx("ClericBoss3Doom",0,0,0,0,0,0,0,SXF_SETMASTER|SXF_NOCHECKPOSITION|SXF_TRANSFERAMBUSHFLAG)
			Goto BossWait
	}
}

ACTOR FighterBossReplacer : ArchvileSpawner replaces FighterBoss 
{
	states
	{
		SetHexen1:
			TNT1 A 1 A_SpawnItemEx("FighterBoss3Doom",0,0,0,0,0,0,0,SXF_SETMASTER|SXF_NOCHECKPOSITION|SXF_TRANSFERAMBUSHFLAG)
			Goto BossWait
	}
}

ACTOR MageBossReplacer : ArchvileSpawner replaces MageBoss 
{
	states
	{
		SetHexen1:
			TNT1 A 1 A_SpawnItemEx("MageBoss3Doom",0,0,0,0,0,0,0,SXF_SETMASTER|SXF_NOCHECKPOSITION|SXF_TRANSFERAMBUSHFLAG)
			Goto BossWait
	}
}

Actor HeresiarchScriptTokens : Counter {}
ACTOR HeresiarchReplacer : CyberDemonSpawner replaces Heresiarch 
{
	states
	{
		SetDoom:
			TNT1 A 1 A_SpawnItemEx("Cyberdemon3",0,0,0,0,0,0,0,SXF_SETMASTER|SXF_NOCHECKPOSITION|SXF_TRANSFERAMBUSHFLAG)
			TNT1 A 0 A_Jump(256,"BossWait")
			Wait
		SetHexen1:
			TNT1 A 1 A_SpawnItemEx("Heresiarch3Doom",0,0,0,0,0,0,0,SXF_SETMASTER|SXF_NOCHECKPOSITION|SXF_TRANSFERAMBUSHFLAG)
			TNT1 A 0 A_Jump(256,"BossWait")
			Wait
		BossWait:
			TNT1 A 0 A_GiveInventory("HeresiarchScriptTokens",special)
			TNT1 A 0 A_JumpIf(CallACS("RemixerInvasionChecker") == 1, "BossRemove")
			TNT1 A 2
			TNT1 A 0 A_ChangeFlag("COUNTKILL",0)
			TNT1 A 0 A_UnSetSolid
			TNT1 A 0 A_UnsetShootable
			TNT1 A 0 A_ChangeFlag("VULNERABLE",1)
		BossWaitLoop:
			TNT1 A 1
			Loop
		BossRemove:
			TNT1 A 1 Thing_Remove(0)
			Stop
		Death:
			TNT1 A 6 ACS_ExecuteWithResult(CallACS("HeresiarchScriptTokens"))
			stop
	} 
}

ACTOR KoraxReplacer : SpiderMastermindSpawner replaces Korax 
{
	states
	{
		SetDoom:
			TNT1 A 1 A_SpawnItemEx("SpiderMastermind3",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|SXF_SETMASTER|SXF_NOCHECKPOSITION|SXF_TRANSFERAMBUSHFLAG|SXF_TRANSFERSPECIAL,0,tid)
			TNT1 A 0 A_Jump(256,"BossWait")
			Wait
		SetDoomRandom:
			TNT1 A 0 A_Jump(144,"SetDoomRandom2")
			TNT1 A 1 A_SpawnItemEx("SpiderMastermind3",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|SXF_SETMASTER|SXF_NOCHECKPOSITION|SXF_TRANSFERAMBUSHFLAG|SXF_TRANSFERSPECIAL,0,tid)
			TNT1 A 0 A_Jump(256,"BossWait")
			Wait
		SetDoomRandom2:
			TNT1 A 0 A_Jump(64,"SetDoomRandom2")
			TNT1 A 1 A_SpawnItemEx("MMRandomizer_ArachnorbQueen",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG|SXF_SETMASTER|SXF_NOCHECKPOSITION|SXF_TRANSFERSPECIAL|SXF_TRANSFERPOINTERS,0,tid)
			TNT1 A 0 A_Jump(256,"BossWait")
			Wait
		SetDoomRandom3:
			TNT1 A 1 A_SpawnItemEx("MMRandomizer_Demolisher",0,0,0,0,0,0,0,SXF_TRANSFERAMBUSHFLAG|SXF_SETMASTER|SXF_NOCHECKPOSITION|SXF_TRANSFERSPECIAL|SXF_TRANSFERPOINTERS,0,tid)
			TNT1 A 0 A_Jump(256,"BossWait")
			Wait	
		SetHexen1:
			TNT1 A 1 A_SpawnItemEx("Korax3Doom",0,0,0,0,0,0,0,SXF_TRANSFERPOINTERS|SXF_SETMASTER|SXF_NOCHECKPOSITION|SXF_TRANSFERAMBUSHFLAG|SXF_TRANSFERSPECIAL,0,tid)
			TNT1 A 0 A_Jump(256,"BossWait")
			Wait
		BossWait:
			TNT1 A 0 A_JumpIf(CallACS("RemixerInvasionChecker") == 1, "BossRemove")
			TNT1 A 2
			TNT1 A 0 A_ChangeFlag("COUNTKILL",0)
			TNT1 A 0 A_UnSetSolid
			TNT1 A 0 A_UnsetShootable
			TNT1 A 0 A_ChangeFlag("VULNERABLE",1)
		BossWaitLoop:
			TNT1 A 1 A_Look
			Loop
		See:
			TNT1 A 0 A_GiveToChildren("KoraxChildInventory",1)
			TNT1 A 0 A_GiveToChildren("KoraxChildInventory",1) //Currently necessitated by Zandronum
		SeeLoop:
			TNT1 A 1
			Loop
		BossRemove:
			TNT1 A 1 Thing_Remove(0)
			Stop
		Death:
			TNT1 A 6 ACS_Execute(255)
			stop
	}  
}

Actor KoraxChildInventory : Trigger
{
	States
	{
		Pickup:
			TNT1 A 0 ACS_NamedExecuteWithResult("ReMixer_Korax")
			Stop
	}
}

ACTOR PigReplacer : WolfensteinSSSpawner replaces Pig 
{
	states
	{
		SetDoom:
			TNT1 A 1 A_SpawnItemEx("Nazi3",0,0,0,0,0,0,0,288)
			Stop
		SetHexen1:
			TNT1 A 1 A_SpawnItemEx("Pig3",0,0,0,0,0,0,0,288)
			Stop
	}
}