Actor Q2Flyer : Q2SoldierBase
{
	SeeSound "Flyer/Sight"
	ActiveSound "Flyer/Active"
	PainSound "Flyer/Pain"
	DeathSound "Flyer/Death"
	AttackSound ""
	MeleeDamage 3
	Speed 8
	+NOGRAVITY 
	+FLOAT 
	+FLOATBOB 
	+DONTFALL 
	+DONTGIB
	Health 60
	PainChance 30
	DropItem Q2Cell 128
	Tag "Strogg Flyer"
	States
	{
	Spawn:
		FLR1 A 0
		FLR1 A 1 A_JumpIfInventory("AlreadySpawned",1,"Spawn2")
		FLR1 A 1 ACS_ExecuteAlways(668,0,1,0)
		FLR1 A 0 A_GiveInventory("AlreadySpawned",1)
		FLR1 A 0 A_JumpIfInventory("InvisibleToken",1,2)
		FLR1 A 0 A_Jump(256,2)
		FLR1 A 0 A_ChangeFlag("STEALTH",1)
	Spawn2:
		FLR1 A 0 A_PlaySound("Flyer/Fly",CHAN_BODY,0.5,1)
		FLR1 ABCDEFGHIJKLMNOPQRSTUV 3 A_Look
		Goto Spawn+1
	See:
		FLR1 A 0 A_ChangeFlag(NOPAIN,0)
		FLR1 ABCDEFGHIJKLMNOPQRSTUV 3 A_Chase
		Loop
	Melee:
		FLR3 A 0 A_PlayWeaponSound("Flyer/Melee1")
		FLR1 A 5
		FLR3 ABCDEFGHI 4 A_FaceTarget
		FLR3 J 0 A_PlayWeaponSound("Flyer/Melee2")
		FLR3 J 3 A_MeleeAttack
		FLR3 KLM 4 A_FaceTarget
		FLR3 N 0 A_PlayWeaponSound("Flyer/Melee2")
		FLR3 N 3 A_MeleeAttack
		FLR3 OPQRSTU 4 A_FaceTarget
		Goto See
	Missile:
		FLR1 A 8 A_FaceTarget
		FLR2 ABCD 3 A_FaceTarget
		FLR2 E 0 A_FaceTarget TNT1 A 0 A_PlayWeaponSound("Flyer/Attack")
		FLR2 E 4 A_CustomMissile(FlyerProjectile,15,-15)
		FLR2 F 0 A_FaceTarget TNT1 A 0 A_PlayWeaponSound("Flyer/Attack")
		FLR2 F 4 A_CustomMissile(FlyerProjectile,15,17)
		FLR2 G 0 A_FaceTarget TNT1 A 0 A_PlayWeaponSound("Flyer/Attack")
		FLR2 G 4 A_CustomMissile(FlyerProjectile,15,-15)
		FLR2 H 0 A_FaceTarget TNT1 A 0 A_PlayWeaponSound("Flyer/Attack")
		FLR2 H 4 A_CustomMissile(FlyerProjectile,15,17)
		FLR2 I 0 A_FaceTarget TNT1 A 0 A_PlayWeaponSound("Flyer/Attack")
		FLR2 I 4 A_CustomMissile(FlyerProjectile,15,-15)
		FLR2 J 0 A_FaceTarget TNT1 A 0 A_PlayWeaponSound("Flyer/Attack")
		FLR2 J 4 A_CustomMissile(FlyerProjectile,15,17)
		FLR2 K 0 A_FaceTarget TNT1 A 0 A_PlayWeaponSound("Flyer/Attack")
		FLR2 K 4 A_CustomMissile(FlyerProjectile,15,-15)
		FLR2 L 0 A_FaceTarget TNT1 A 0 A_PlayWeaponSound("Flyer/Attack")
		FLR2 L 4 A_CustomMissile(FlyerProjectile,15,17)
		FLR2 MNOPQ 3
		Goto See
	Pain:
		TNT1 A 0 A_ChangeFlag(NOPAIN,1)
		TNT1 A 0 A_Pain
		TNT1 A 0 A_Jump(256,"Pain1","Pain2","Pain3")
	Pain1:
		FLR4 ABCDEFGH 5
		Goto See
	Pain2:
		FLR4 IJKL 5
		Goto See
	Pain3:
		FLR4 MNOP 5
		Goto See
	Death:
	XDeath:
		TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)		
		TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)		
		FLR1 A 10 A_Scream		
		TNT1 A 0 A_Fall
		TNT1 A 0 A_PlaySound("Q2Weapons/RocketExplosion")
		TNT1 A 5 A_SpawnItem(Q2Explosion)
		Stop
	Death.RottDisintegrate:
		"####" "#" 0 A_ChangeFlag("SOLID", 0)
		"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" "#" 0 A_Scream
		"####" "#" 0 A_NoBlocking	
		"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
		"####" "#" 0 A_Stop
		"####" "#" 0 A_ChangeFlag("SHOOTABLE",FALSE)
		"####" "#" 0 A_ChangeFlag("NOGRAVITY",TRUE)
		"####" "#" 0 A_ChangeFlag("FLOORCLIP",TRUE)
		"####" "#" 0 A_SpawnItem("RGodModeDeathTiny")
		"####" "#" 3 A_SetTranslucent(0.9,0)
		"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
		"####" "#" 3 A_SetTranslucent(0.8,0)
		"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
		"####" "#" 3 A_SetTranslucent(0.7,0)
		"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
		"####" "#" 3 A_SetTranslucent(0.6,0)
		"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
		"####" "#" 3 A_SetTranslucent(0.5,0)
		"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
		"####" "#" 2 A_SetTranslucent(0.4,0)
		"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
		"####" "#" 2 A_SetTranslucent(0.3,0)
		"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
		"####" "#" 2 A_SetTranslucent(0.2,0)
		"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
		"####" "#" 2 A_SetTranslucent(0.1,0)
		stop
	Disintegrate:
		"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" "#" 0 A_NoBlocking
		"####" "#" 0 A_ChangeFlag("DONTGIB",1)
		"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
		"####" "#" 0 A_Scream
		"####" "#" 0 A_ChangeFlag("SOLID",FALSE)
		"####" "#" 0 A_ChangeFlag("SHOOTABLE",FALSE)
		"####" "#" 0 A_ChangeFlag("NOGRAVITY",TRUE)
		"####" "#" 0 A_ChangeFlag("FLOORCLIP",TRUE)
		"####" "#" 0 A_Stop
		"####" "#" 3 A_SpawnItem("DisintEffectTiny",0,10)
		"####" "#" 3 A_SetTranslucent(0.9,0)
		"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
		"####" "#" 3 A_SetTranslucent(0.8,0)
		"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
		"####" "#" 3 A_SetTranslucent(0.7,0)
		"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
		"####" "#" 3 A_SetTranslucent(0.6,0)
		"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
		"####" "#" 3 A_SetTranslucent(0.5,0)
		"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
		"####" "#" 2 A_SetTranslucent(0.4,0)
		"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
		"####" "#" 2 A_SetTranslucent(0.3,0)
		"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
		"####" "#" 2 A_SetTranslucent(0.2,0)
		"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
		"####" "#" 2 A_SetTranslucent(0.1,0)
        stop
	Death.Nuke:
		"####" "#" 0 A_ChangeFlag("SOLID", 0)
		"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" "#" 0 A_Scream
		"####" "#" 0 A_NoGravity		
		"####" "#" 0 A_NoBlocking		
		"####" "#" 0 A_SpawnItem("WTNukeDeathTiny")
		"####" "#################" 3 A_Fadeout(0.05)
		stop
	Death.ZorchPistol:
	Death.Zorch:
	Death.ZorchKamikaze:
	Death.PhasingZorch:
	Death.ZorchSpectral:
		"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
		"####" "#" 0 A_Stop
		"####" "#" 0 A_NoGravity		
		"####" "#" 0 A_ChangeFlag("DONTGIB",1)
		"####" "#" 0 A_PlaySoundEx("chex/zorch","soundslot5",0,0)
		"####" "#" 3 A_SpawnItem("ZorchEffectTiny")
		"####" "#" 0 A_GiveInventory("EnemyZorched",1)
		"####" "#" 3 A_SetTranslucent(0.9,0)
		"####" "#" 0 A_Scream
		"####" "#" 3 A_SetTranslucent(0.8,0)
		"####" "#" 0 A_NoBlocking
		"####" "#" 3 A_SetTranslucent(0.7,0)
		"####" "#" 3 A_SetTranslucent(0.6,0)
		"####" "#" 3 A_SetTranslucent(0.5,0)
		"####" "#" 3 A_SetTranslucent(0.4,0)
		"####" "#" 3 A_SetTranslucent(0.3,0)
		"####" "#" 3 A_SetTranslucent(0.2,0)
		"####" "#" 3 A_SetTranslucent(0.1,0)
		TNT1 A 1 A_SetTranslucent(1,0)
		TNT1 A -1
		stop
	}
}
Actor FlyerProjectile : HyperBlasterProjectile { Damage (Random(2,4)) }