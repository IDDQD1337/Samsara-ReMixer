Actor TotenkopfMechanoidStormtrooper : TotenkopfEnemy
{
	Health 400
	Speed 6
	PainChance 0
	+FLOORCLIP
    +NOTDMATCH
    +THRUGHOST
	+MISSILEMORE
	-NOINFIGHTING
	Tag "Mechanoid Stormtrooper"
	SeeSound ""
	ActiveSound ""
	DeathSound "Totenkopf/MechDeath"
	Obituary "%o was shot by a Mechanoid Stormtrooper."
	DropItem "Totenkopf_MG42EnemyDrop"
	BloodColor "94 0 96"
	BloodType "TotenkopfBloodMutant"
	States 
	{
		Spawn:
			TK39 A 1 A_Look
			Loop
		See:
			"####" AAABBCCCDD 2 A_Chase
			Loop
		Missile:
			"####" E 15 A_FaceTarget
		MissileHold:
			"####" F 0 A_CustomMissile("Totenkopf_Tracer_Stormtrooper",48,0,random(-3,3))
			"####" F 0 A_PlaySound("Totenkopf/AtkMG42", CHAN_WEAPON)
			"####" F 2 Bright 
			"####" F 0 A_CustomMissile("Totenkopf_Tracer_Stormtrooper",48,0,random(-3,3))
			"####" F 1 Bright 
			"####" G 0 A_CustomMissile("Totenkopf_Tracer_Stormtrooper",48,0,random(-3,3))
			"####" G 0 A_PlaySound("Totenkopf/AtkMG42", CHAN_WEAPON)
			"####" G 3 Bright 
			"####" F 0 A_CustomMissile("Totenkopf_Tracer_Stormtrooper",48,0,random(-3,3))
			"####" F 2 Bright 
			"####" G 0 A_CustomMissile("Totenkopf_Tracer_Stormtrooper",48,0,random(-3,3))
			"####" G 0 A_PlaySound("Totenkopf/AtkMG42", CHAN_WEAPON)
			"####" G 3 Bright 
			"####" F 0 A_CustomMissile("Totenkopf_Tracer_Stormtrooper",48,0,random(-3,3))
			"####" F 2 Bright 
			"####" G 0 A_CustomMissile("Totenkopf_Tracer_Stormtrooper",48,0,random(-3,3))
			"####" G 0 A_PlaySound("Totenkopf/AtkMG42", CHAN_WEAPON)
			"####" G 3 Bright 
			"####" F 0 A_CustomMissile("Totenkopf_Tracer_Stormtrooper",48,0,random(-3,3))
			"####" F 2 Bright 
			"####" G 0 A_CustomMissile("Totenkopf_Tracer_Stormtrooper",48,0,random(-3,3))
			"####" G 0 A_PlaySound("Totenkopf/AtkMG42", CHAN_WEAPON)
			"####" G 3 Bright 
			"####" G 0 A_MonsterRefire(0,"See")
			Loop
		Death:
			"####" H 0 A_SpawnItemEx("Totenkopf_Spark",0,0,48,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" H 2
			"####" H 0 A_Scream
			"####" H 3
			"####" I 0 A_SpawnItemEx("Totenkopf_Spark",0,0,48,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" I 0 A_NoBlocking
			"####" I 5
			"####" J 0 A_SpawnItemEx("Totenkopf_Spark",0,0,40,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" J 5
			"####" K 5
			"####" L -1 A_KillMaster
			Stop
	}
}

Actor Totenkopf_Tracer_Stormtrooper : Totenkopf_Tracer_Enemy 
{ 
	Damage (2+(random(0,256)%10)) 
	States
	{
		Death:
		Crash:
			TNT1 A 0 A_Playsound("Totenkopf/Ricochet", CHAN_BODY)
			TNT1 A 0 A_JumpIf(CallACS("Totenkopf_Tracer",1,24,48) == 1, 1)
			TK51 BCDE 2 Bright
			Stop
		XDeath:
			TNT1 A 0 A_JumpIf(CallACS("Totenkopf_Tracer",1,24,48) == 1, 1)
			TNT1 A 0 A_JumpIf(CallACS("Totenkopf_BloodGenerator_Offsets")==1,1)
			TNT1 A 1 Bright
			TNT1 A 0 A_GiveInventory("Totenkopf_BloodGenerator",1,AAPTR_TRACER)
			TNT1 A 1
			Stop
	}
}

Actor Totenkopf_Spark
{
	+NOINTERACTION
	+NOGRAVITY
	+CLIENTSIDEONLY
	States
	{
		Spawn:
			TNT1 A 0
			TK60 ABCD 4
			Stop
	}
}