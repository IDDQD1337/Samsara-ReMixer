Actor HECU_Grunt1_StayOpp_MP5 : SwitchableDecoration
{
	Height 52
	Radius 20
	Monster
	Scale 0.9
	Health 100
	speed 8
	MeleeRange 86
	Painchance 100
	//Seesound "OppGrunt/Alert"
	//ActiveSound "OppGrunt/Taunt"
	PainSound "OppGrunt/Pain"
	DeathSound "OppGrunt/Death"	
	BloodType "HalfLifeBlood"
	DropItem "HL_HECU_MP5Drop", 96, 1
	Tag "Hazard Environmental Combat Unit Soldier"
    DamageFactor "Mace", 1.1
    DamageFactor "DragonClaw", 1.5
	DamageFactor "Massacre", 0.0
    PainChance "MightyBoot", 255
	PainChance "MarathonStun", 255	
	Species "Player"
	var int user_scalex;
	var int user_scaley;
	Activation THINGSPEC_Activate|THINGSPEC_ThingTargets
	+FRIENDLY
	+MISSILEMORE
	+MISSILEEVENMORE
	+NOINFIGHTING
	+NOBLOODDECALS
	+USESPECIAL
	-COUNTKILL
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/FollowAdrian")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Grunt1_FollowOpp_MP5",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
		Spawn:
			HL00 A 0
			HL00 A 0 A_GiveInventory("HLSpeedTokens", 8)
			//HL00 A 0 A_ChangeFlag("Friendly", true)
			HL00 A 0 A_GiveInventory("AllyToken", 1)
			HL00 A 0 A_JumpIfInventory("AlreadySpawned",1,"SpawnStandard")
			HL00 A 0 ACS_ExecuteAlways(668,0,1,0)
			HL00 A 0 A_GiveInventory("AlreadySpawned",1)
			HL00 A 0 A_JumpIfInventory("InvisibleToken",1,2)
			HL00 A 0 A_Jump(256,2)
			HL00 A 0 A_ChangeFlag("STEALTH",1)
			HL00 A 0
			Goto SpawnWaitForPlayers
		SpawnStandard:
			TNT1 A 0 A_ChangeFlag("Friendly", 1)
			TNT1 A 0 A_ClearTarget
			TNT1 A 0 A_LookEx(0,0,1280,1280,0,"SeeCheck")
			TNT1 A 0 A_Jump(128,"Spawn2")
		Spawn1:	
			HL00 A 0 A_Jump(48,"Idle")
			HL00 A 0 A_Jump(248,2)
			HL00 A 0 A_Playsound("OppGrunt/Idle", CHAN_VOICE)
			HL00 A 0
			HL00 ABCDEFGH 4 A_Look
			Loop
		Spawn2:
			HL14 A 0 A_Jump(48,"Idle")
			HL14 A 0 A_Jump(248,2)
			HL14 A 0 A_Playsound("OppGrunt/Idle", CHAN_VOICE)
			HL14 A 0			
			HL14 ABCDEFGHIJKLMNOPQR 4 A_Look		
			Loop
		SpawnWaitForPlayers:
			TNT1 A 0 A_ChangeFlag("Friendly", 0)
			TNT1 A 0 A_ClearTarget
			TNT1 A 0 A_LookEx(0,0,1280,1280,0,"SeeToken")
			TNT1 A 0 A_Jump(128,"SpawnWait2")
		SpawnWait1:	
			HL00 A 0 A_Jump(248,2)
			HL00 A 0 A_Playsound("OppGrunt/Idle", CHAN_VOICE)
			HL00 A 0
			HL00 ABCDEFGH 4 A_LookEx(0,0,1280,1280,0,"SeeToken")
			Loop
		SpawnWait2:
			HL14 A 0 A_Jump(248,2)
			HL14 A 0 A_Playsound("OppGrunt/Idle", CHAN_VOICE)
			HL14 A 0			
			HL14 ABCDEFGHIJKLMNOPQR 4 A_LookEx(0,0,1280,1280,0,"SeeToken")	
			Loop
		Idle:
			HL22 A 0 ACS_NamedExecuteAlways("HalfLifeAllyWalkRunSpeed", 0, 0)
			HL22 A 0 A_JumpIfHealthLower(50,"LimpWalk")
			HL22 AB 2 A_Wander
			HL22 C 0 A_Look
			HL22 CD 2 A_Wander
			HL22 E 0 A_Look			
			HL22 EF 2 A_Wander
			HL22 G 0 A_Look			
			HL22 GH 2 A_Wander
			HL22 I 0 A_Look			
			HL22 IJ 2 A_Wander
			HL22 K 0 A_Look			
			HL22 KL 2 A_Wander
			HL22 M 0 A_Look			
			HL22 MN 2 A_Wander
			HL22 O 0 A_Look			
			HL22 OP 2 A_Wander
			HL22 Q 0 A_Look			
			HL22 QR 2 A_Wander
			HL22 S 0 A_Look			
			HL22 STU 2 A_Wander
			HL22 A 0 A_Look		
			HL22 A 0 A_Jump(128, "SpawnStandard")
			Loop
		LimpWalk:
			HL17 AB 2 A_Wander
			HL17 C 0 A_Look
			HL17 CD 2 A_Wander
			HL17 E 0 A_Look			
			HL17 EF 2 A_Wander
			HL17 G 0 A_Look			
			HL17 GH 2 A_Wander
			HL17 I 0 A_Look			
			HL17 IJ 2 A_Wander
			HL17 K 0 A_Look			
			HL17 KL 2 A_Wander
			HL17 M 0 A_Look			
			HL17 MN 2 A_Wander
			HL17 O 0 A_Look			
			HL17 O 2 A_Wander
			HL17 A 0 A_Look		
			HL17 A 0 A_Jump(128, "SpawnStandard")
			Loop
		SeeToken:
			TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(2684,1) == 1,"GiveSeeToken")
			HL01 ABCDEFGH 2 A_Chase("","")
			Loop
		GiveSeeToken:
			TNT1 A 0 A_ChangeFlag("Friendly", 1)
			TNT1 A 0 A_GiveInventory("seetoken", 1)
			Goto SpawnStandard
		SeeCheck:
			TNT1 A 0 A_ClearTarget
			TNT1 A 0 A_LookEx(LOF_NOJUMP, 0, 1280, 1280, 0)
			TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(2684,1) == 2,"Chase")
			TNT1 A 0 A_JumpIfInventory("seetoken", 1, "See2")
			goto See
		SeeCheck2:
			TNT1 A 0 A_ClearTarget
			TNT1 A 0 A_LookEx(LOF_NOJUMP, 0, 1280, 1280, 0)
			TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(2684,1) == 2,"Chase")
			TNT1 A 0 A_JumpIfInventory("seetoken", 1, "See2")
			goto See2
		SetSee:
			TNT1 A 0 A_ChangeFlag(FRIGHTENED,0)			
			Goto SeeCheck
		See:
			HL01 A 0 ACS_NamedExecuteAlways("HalfLifeAllyWalkRunSpeed", 0, 1)
			TNT1 A 0 A_JumpIfInTargetInventory("AllyToken", 1, "IgnoreHelpers")
			TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(2684,1) == 2,"Chase")
			HL01 A 0 A_JumpIfHealthLower(50,"LimpRun")
			HL01 ABCDEFGHI 2 A_Chase
			Goto SeeCheck
		See2:
			TNT1 A 0 A_JumpIfInTargetInventory("AllyToken", 1, "IgnoreHelpers")
			TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(2684,1) == 2,"Chase")
			HL01 A 0 A_JumpIfHealthLower(50,"LimpRun")
			HL01 ABCDEFGHI 2 A_Chase
			Goto SeeCheck2
		Chase:
			HL01 ABCDEFGHI 2 A_Chase
			Loop
		IgnoreHelpers: 
			//Look until you find something that is not a helper. If the other possible target is the player, go towards it.
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_ClearTarget
			TNT1 A 0 A_JumpIfInTargetInventory("AllyToken", 1, 2)
			GOTO SeeCheck
			TNT1 A 0 A_ClearTarget
			HL14 A 1 A_LookEx(0, 0, 0, 0, 360, "IGNOREHELPERS")
			Goto SeeCheck
		LimpRun:
			HL16 ABCDEFGHI 2 A_Chase
			Loop
		Missile:
			TNT1 A 0 A_JumpIfInTargetInventory("AllyToken", 1, "IGNOREHELPERS")
			TNT1 A 0 A_Jump(180,"StartFiring")
			TNT1 A 0 A_JumpIfCloser(328,"ThrowGrenade")
		StartFiring:	
			HL02 A 0 A_FaceTarget
			TNT1 A 0 A_JumpIfInventory("HECU_MP5_DummyReload",50,"Reload")
			TNT1 A 0 A_GiveInventory("HECU_MP5_DummyReload",1)			
			TNT1 A 0 A_PlaySound("MP5/FireBurst")
			TNT1 A 0 A_AlertMonsters(1024,AMF_TARGETEMITTER)
			TNT1 A 0 A_CustomMissile("HLBullet_Friendly",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_SpawnItemEx("HLMGMuzzleFlash",36,4,44,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 ABCDEF 1
			HL02 A 0 A_FaceTarget
			TNT1 A 0 A_JumpIfInventory("HECU_MP5_DummyReload",50,"Reload")
			TNT1 A 0 A_AlertMonsters(1024,AMF_TARGETEMITTER)
			TNT1 A 0 A_GiveInventory("HECU_MP5_DummyReload",1)			
			TNT1 A 0 A_CustomMissile("HLBullet_Friendly",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_SpawnItemEx("HLMGMuzzleFlash",36,4,44,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 ABCDEF 1
			HL02 A 0 A_FaceTarget
			TNT1 A 0 A_JumpIfInventory("HECU_MP5_DummyReload",50,"Reload")
			TNT1 A 0 A_AlertMonsters(1024,AMF_TARGETEMITTER)
			TNT1 A 0 A_GiveInventory("HECU_MP5_DummyReload",1)			
			TNT1 A 0 A_CustomMissile("HLBullet_Friendly",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_SpawnItemEx("HLMGMuzzleFlash",36,4,44,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 ABCDEF 1
			TNT1 A 0 A_JumpIfTargetInLOS("KeepFiring",0,JLOSF_DEADNOJUMP)
			Goto Retaliate
		KeepFiring:
			HL02 A 5
			TNT1 A 0 A_CPosRefire
			Goto StartFiring+1
		Retaliate:
			TNT1 A 0
			Goto SeeCheck		
		Reload:
			TNT1 A 0 A_ChangeFlag(NOPAIN,1)
			TNT1 A 0 A_TakeInventory("HECU_MP5_DummyReload",50)
			HL19 ABCDEFGHIJKLMNOPQRSTUVWX 2
			TNT1 A 0 A_ChangeFlag(NOPAIN,0)			
			Goto SeeCheck
		ThrowGrenade:
			TNT1 A 0 A_Playsound("OppGrunt/Throw", CHAN_VOICE)
			HL13 ABCDEFGHIJKLM 3 A_FaceTarget
			TNT1 A 0 A_CustomMissile("HLHECUGrenade", 32)
			HL13 NOPQRS 2
			TNT1 A 0 A_Jump(100,"RunAway")
			TNT1 A 0 A_JumpIfCloser(464,"Cover")
			TNT1 A 0 A_Jump(164,"RunAway")			
			TNT1 A 0 A_JumpIfCloser(729,"Cover")			
			Goto SeeCheck
		RunAway:
			TNT1 A 0 A_ChangeFlag(FRIGHTENED,1)
			HL01 ABCDEFGHI 2 A_Chase("","",CHF_NOPLAYACTIVE)
			HL01 ABCDEFGHI 2 A_Chase("","",CHF_NOPLAYACTIVE)
			HL01 ABCDEFGHI 2 A_Chase("","",CHF_NOPLAYACTIVE)
			HL01 A 0 A_Jump(24,"SetCover")
			HL01 ABCDEFGHI 2 A_Chase("","",CHF_NOPLAYACTIVE)
			HL01 A 0 A_Jump(12,"SetSee")
			HL01 ABCDEFGHI 2 A_Chase("","",CHF_NOPLAYACTIVE)			
			TNT1 A 0 A_ChangeFlag(FRIGHTENED,0)			
			Goto SeeCheck		
		SetCover:
			TNT1 A 0 A_ChangeFlag(FRIGHTENED,0)			
			Goto Cover
		Cover:
			TNT1 A 0 A_Playsound("OppGrunt/Grenade", CHAN_VOICE)
			HL21 ABCDEFGHIJKLMNOPQRSTU 2
			Goto SeeCheck
		Melee:
			TNT1 A 0 A_JumpIfInTargetInventory("AllyToken", 1, "IGNOREHELPERS")
			TNT1 A 0 A_Jump(41,"PlaceGrenade")
		Kick:	
			HL15 ABCD 4 A_FaceTarget
			HL15 E 3 A_CustomMeleeAttack(Random(1,10)*2,"","")
			HL15 FGHIJK 2
			Goto SeeCheck
		PlaceGrenade:
			HL20 ABCDEFGHIJ 3 A_FaceTarget
			TNT1 A 0 A_SpawnItemEx("HLHECUGrenade_Ground",3,-15,0,0,0,0,0,SXF_NOCHECKPOSITION)
			HL20 KLMNO 2
			Goto RunAway
		Pain:
			TNT1 A 0 A_Pain
			HL18 ABCDEF 3
			TNT1 A 0 A_ChangeFlag(FRIGHTENED,0)
			Goto SeeCheck
		Death:
			TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)		
			TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)					
			TNT1 A 0 A_Jump(128,"Death2","Death3","Death4","Death5","Death6")
			TNT1 A 0 A_NoBlocking
			TNT1 A 0 A_Scream
			HL07 ABCDEFGHI 4
			HL07 I -1
			Stop
		Death2:
			TNT1 A 0 A_NoBlocking
			TNT1 A 0 A_Scream
			HL08 ABCDEFGHIJKLMNOPQRS 4
			HL08 S -1
			Stop	
		Death3:
			TNT1 A 0 A_NoBlocking
			TNT1 A 0 A_Scream
			HL09 ABCDEFGHIJKLMNO 4
			HL09 O -1
			Stop
		Death4:
			TNT1 A 0 A_NoBlocking
			TNT1 A 0 A_Scream
			HL10 ABCDEFGHIJKLMNOPQRSTUVWX 4
			HL10 X -1
			Stop				
		Death5:
			TNT1 A 0 A_NoBlocking
			TNT1 A 0 A_Scream
			HL11 ABCDEFGHIJKLMNOPQRSTU 4
			HL11 U -1
			Stop			
		Death6:
			TNT1 A 0 A_NoBlocking
			TNT1 A 0 A_Scream
			HL12 ABCDEFG 4
			HL12 G -1
			Stop	
		Death.RottFire:
			TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
			TNT1 A 0 A_SpawnItem("BurningSkeleton")
			TNT1 A 0 A_NoBlocking		
			TNT1 A 5
		   Stop	
		Death.RottExplosive:
			TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
			TNT1 A 0 A_SpawnItemEx("RottGibbedMan",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			TNT1 A 1
			TNT1 A 0 A_Jump(128, 2)
			TNT1 A 0 A_GiveToTarget("LudicrousGibsItem", 1)
			TNT1 AA 0
			TNT1 A 5 A_NoBlocking
			Stop
		Death.RottDisintegrate:
			TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
			TNT1 A 0 A_ChangeFlag(SOLID,0)		
			TNT1 A 0 A_Scream
			TNT1 A 1 A_SpawnItem("RGodModeDeath")
			TNT1 A 5 A_FadeOut
			Stop	
		Disintegrate:
			"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
			"####" "#" 0 A_NoBlocking
			"####" "#" 0 A_ChangeFlag("DONTGIB",1)
			"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
			"####" "#" 0 A_Scream
			"####" "#" 0 A_ChangeFlag("SOLID",FALSE)
			"####" "#" 0 A_ChangeFlag("SHOOTABLE",FALSE)
			"####" "#" 0 A_ChangeFlag("NOGRAVITY",TRUE)
			"####" "#" 0 A_ChangeFlag("FLOORCLIP",TRUE)
			"####" "#" 0 A_Stop
			"####" "#" 3 A_SpawnItem("DisintEffectSmall",0,10)
			"####" "#" 3 A_SetTranslucent(0.9,0)
			"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
			"####" "#" 3 A_SetTranslucent(0.8,0)
			"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
			"####" "#" 3 A_SetTranslucent(0.7,0)
			"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
			"####" "#" 3 A_SetTranslucent(0.6,0)
			"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
			"####" "#" 3 A_SetTranslucent(0.5,0)
			"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
			"####" "#" 2 A_SetTranslucent(0.4,0)
			"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
			"####" "#" 2 A_SetTranslucent(0.3,0)
			"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
			"####" "#" 2 A_SetTranslucent(0.2,0)
			"####" "#" 0 ACS_ExecuteAlways(2530,0,1)
			"####" "#" 2 A_SetTranslucent(0.1,0)
			stop
		Death.Nuke:
			"####" "#" 0 A_ChangeFlag("SOLID", 0)
			"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
			"####" "#" 0 A_Scream
			"####" "#" 0 A_NoBlocking		
			"####" "#" 0 A_SpawnItem("WTNukeDeathSmall")
			"####" "#################" 3 A_Fadeout(0.05)
			stop	
		XDeath:
		Death.HLLaser:
		Death.HLExplosive:
		Death.HLRPGExplosive:	
			TNT1 A 0 A_JumpIfHealthLower(-20,1)
			goto Death
		Death.HLEgon:
		Death.FreemanGibs:
			TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)		
			TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)			
			TNT1 A 0 A_SpawnItem("HLHECUGibSpawner")
			TNT1 A 5 A_NoBlocking
			Stop	
		Pain.LifeLeech: 
			TNT1 A 0 A_GiveToTarget("SerpentHealth", random(1,2))
			TNT1 A 0 A_GiveToTarget("HealthBonus", 1)
			Goto Pain		
		Pain.Vodoo:
			TNT1 A 0 A_GiveToTarget("Voodoo", 1)
			Goto Pain
		Death.Vodoo:
		Death.VoodooPuff:
		Death.DynamiteCoop:
		Death.Dynamite:
		Death.CalebNapalm:
		Death.Shock:	  
		Death.Vodoo:
			TNT1 A 0 A_JumpIfHealthLower(-20,"XDeathForCaleb")
		Death.Tesla:
		Death.CalebBullet:	
			TNT1 A 0 A_Jump(218, "Death")
			TNT1 A 0 A_GiveToTarget("CalebDMTaunt1", 1)
			Goto Death
		XDeathForCaleb:
			TNT1 A 0 A_UnsetSolid
			TNT1 A 0 A_SpawnItemEx("CalebGibSpawner")
			TNT1 A 0 A_Jump(96,"XDeath")
			TNT1 A 0 A_GiveToTarget("CalebDMTaunt1",1)
			Goto XDeath		
		Death.EradExplosive:
		Death.EradNova:
		Death.EradShock:
		Death.EradExplosive2:	
			TNT1 A 0 A_JumpIfHealthLower(-5,"XDeathForCatBitch")
		Death.EradDisc:
		Death.EradPiercingDart:
		Death.EradGreenFire:
		Death.EradCoopGreenFire:
			TNT1 A 0 A_Jump(218, "Death")
			TNT1 A 0 A_GiveToTarget("EleenaDMTaunt1", 1)
			Goto Death
		XDeathForCatBitch:
			TNT1 A 0 A_UnsetSolid
			TNT1 A 0 A_Jump(96,"XDeath")
			TNT1 A 0 A_GiveToTarget("EleenaGibTaunt",1)
			Goto XDeath
		Death.DukeExplosive:
			TNT1 A 0 A_JumpIfHealthLower(-3,"DukeGibStart")		
		Death.DukeDamage:
		Death.DukePistol:
			TNT1 A 0 A_Jump(218,"Death")
			TNT1 A 0 A_GiveToTarget("DukeKillTaunt",1)
			goto Death
		Death.MightyBoot:
			TNT1 A 0 A_PlaySoundEx("duke/kickhit","body",0,0)
			TNT1 A 0 A_Jump(64,"Death")
			TNT1 A 0 A_GiveToTarget("DukeBootTaunt",1)
			goto Death
		DukeGibStart:
			TNT1 A 0 A_UnsetSolid
			TNT1 A 0 A_SpawnDebris("DukeGibs1")
			TNT1 A 0 A_SpawnDebris("DukeGibs2")
			TNT1 A 0 A_SpawnDebris("DukeGibs3")
			TNT1 A 0 A_SpawnDebris("DukeGibs4")
			TNT1 A 0 A_SpawnDebris("DukeGibs5")
			TNT1 A 0 A_SpawnDebris("DukeGibs6")
			TNT1 A 0 A_PlaySound("duke/enemygib")
			TNT1 A 0 A_Jump(96,"XDeath")
			TNT1 A 0 A_GiveToTarget("DukeGibTaunt",1)
			Goto XDeath
		Death.PSRAPower:
		Death.PSRAPowerCoop:
		Death.PSExplosive:
		Death.PSExplosiveCoop:
			TNT1 A 0 A_JumpIfHealthLower(-30, "XDeathForJon")
		Death.PSBullet:
		Death.PSFire:	
			TNT1 A 0 A_Jump(218, "Death")
			TNT1 A 0 A_GiveToTarget("JonDMTaunt1", 1)
			Goto Death
		XDeathForJon:
			TNT1 A 0 A_UnsetSolid
			TNT1 A 0 A_Jump(96,"XDeath")
			TNT1 A 0 A_GiveToTarget("JonDMTaunt1",1)
			Goto XDeath		
		Death.LeonardDamage2:
		Death.LeonardDamage3:
			TNT1 A 0 A_JumpIfHealthLower(-20, "XDeathForLeonard")
		Death.LeonardDamage0:
		Death.LeonardDamage1:	
			TNT1 A 0 A_Jump(218, "Death")
			TNT1 A 0 A_GiveToTarget("LeonardDMTaunt1", 1)
			Goto Death
		XDeathForLeonard:
			TNT1 A 0 A_UnsetSolid
			TNT1 A 0 A_SpawnItemEx("RRGibSpawner")
			TNT1 A 0 A_Jump(96,"XDeath")
			TNT1 A 0 A_GiveToTarget("LeonardGibTaunt",1)
			Goto XDeath		
		Death.SWFist:
			TNT1 A 0 A_GiveToTarget("SWLoWangBloody", 1)
			TNT1 A 0 A_Jump(218, "Death")
			TNT1 A 0 A_SpawnItemEx("SWFisted")
			TNT1 A 0 A_GiveToTarget("LoWangDMTaunt1", 1)
			goto Death	
		Death.SWKatana:
			TNT1 A 0 A_GiveToTarget("SWLoWangBloody", 1)
			TNT1 A 0 A_Jump(218, "Death")
			TNT1 A 0 A_SpawnItemEx("SWKatanad")
			TNT1 A 0 A_GiveToTarget("LoWangDMTaunt1", 1)
			goto Death	
		Death.SWShuriken:
			TNT1 A 0 A_Jump(218, "Death")
			TNT1 A 0 A_SpawnItemEx("SWShurikend")
			TNT1 A 0 A_GiveToTarget("LoWangDMTaunt1", 1)
			goto Death
		Death.SWSticky:
		Death.SWStickyCoop:		
		Death.SWGrenade:
		Death.SWNuke:
		Death.SWRocket:
		Death.SWRailgun:
		Death.SWRailgunCoop:
		Death.SWNukeCoop:
		Death.SWFlame:
		Death.SWFlame2:
		Death.SWFlame2Coop:
		Death.SWFlame3:	
			TNT1 A 0 A_JumpIfHealthLower(-3,"XDeathForWang")
		Death.SWBullet:	  
			TNT1 A 0 A_Jump(218, "Death")
			TNT1 A 0 A_GiveToTarget("LoWangDMTaunt1", 1)
			goto Death
		XDeathForWang:
			TNT1 A 0 A_UnsetSolid
			TNT1 A 0 A_SpawnItemEx("SWHumanGibSpawner")	
			TNT1 A 0 A_Jump(218, "XDeath")	
			TNT1 A 0 A_GiveToTarget("LoWangDMTaunt2",1)
			goto XDeath	
		Death.DukeIce:
			"####" "#" 0 A_PlaySound("duke/enemyfreeze")
			"####" "#" 0 A_GiveInventory("FreezethrowerWeakness")
			"####" "#" 0 A_Jump(218,"Ice")
			"####" "#" 0 A_GiveToTarget("DukeKillTaunt",1)
		Ice:
		Death.HexenIce:
		Death.WTMeleeIce:
		Death.WTRangedIce:
		Death.Ice:
			"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
			"####" "#" 0 A_NoBlocking
			"####" "#" 0 A_GenericFreezeDeath
			"####" "#" 70 A_UnsetSolid
			"####" "#" 0 A_IceGuyDie
			"####" "#" 1 A_IceGuyDie
			TNT1 A 0
			stop
		Death.ZorchPistol:
		Death.Zorch:
		Death.ZorchKamikaze:
		Death.PhasingZorch:
		Death.ZorchSpectral:
			"####" "#" 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
			"####" "#" 0 A_Stop
			"####" "#" 0 A_ChangeFlag("DONTGIB",1)
			"####" "#" 0 A_PlaySoundEx("chex/zorch","soundslot5",0,0)
			"####" "#" 3 A_SpawnItem("ZorchEffectSmall")
			"####" "#" 0 A_GiveInventory("EnemyZorched",1)
			"####" "#" 3 A_SetTranslucent(0.9,0)
			"####" "#" 0 A_Scream
			"####" "#" 3 A_SetTranslucent(0.8,0)
			"####" "#" 0 A_NoBlocking
			"####" "#" 3 A_SetTranslucent(0.7,0)
			"####" "#" 3 A_SetTranslucent(0.6,0)
			"####" "#" 3 A_SetTranslucent(0.5,0)
			"####" "#" 3 A_SetTranslucent(0.4,0)
			"####" "#" 3 A_SetTranslucent(0.3,0)
			"####" "#" 3 A_SetTranslucent(0.2,0)
			"####" "#" 3 A_SetTranslucent(0.1,0)
			TNT1 A 1 A_SetTranslucent(1,0)
			TNT1 A -1
			stop
		Death.QuakeElectric:
		Death.NotQuadded:
		Death.QuakeExplosive:
			TNT1 A 0 A_JumpIfHealthLower(-50, "XDeathForRanger")
			goto Death
		XDeath.QuakeElectric:
		XDeath.NotQuadded:
		XDeath.QuakeExplosive:
		XDeathForRanger:
			TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)  
			TNT1 A 0 A_SpawnItemEx("QuakeGibSpawner",0,0,0,0,0,0,0,SXF_USEBLOODCOLOR|SXF_NOCHECKPOSITION)
			TNT1 A 0 A_Fall
			TNT1 A 5 A_FadeOut
			Stop
		Death.BittermanDamage:
			TNT1 A 0 A_JumpIfHealthLower(-50, "XdeathForBitterman")
			goto Death
		XdeathForBitterman:
			TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)  
			TNT1 A 0 A_SpawnItemEx("Q2GibSpawner",0,0,0,0,0,0,0,SXF_USEBLOODCOLOR|SXF_NOCHECKPOSITION)
			TNT1 A 0 A_Fall
			TNT1 A 5 A_FadeOut
			Stop
		Pain.ShrinkerDMG:
			HL18 A 0
			"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
			"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
			"####" "#" 0 A_ChangeFlag("NOPAIN", 1)
			"####" "#" 0 A_ChangeFlag("NODAMAGE", 1)
			"####" "#" 0 A_NoBlocking
			"####" "#" 0 A_PlaySound("duke/shrink")
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt1_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			"####" "#" 1 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 4 A_SetScale(0.2*(user_scalex/65536.0),0.2*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("HECU_Grunt1_Shrink", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_TRANSFERPOINTERS|SXF_TRANSFERSPECIAL|SXF_TRANSFERAMBUSHFLAG|SXF_SETMASTER,0,tid)
			TNT1 A 2
			TNT1 A 0 Thing_Remove(0)
			stop
		Death.ExpanderDMG:
		XDeath.ExpanderDMG:
			HL00 A 0
			"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
			"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
			"####" "#" 0 A_PlaySound("duke/expand")
			Goto ExpanderLoop
		ExpanderLoop:
			"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
			"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
			"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
			"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
			"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
			"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
			loop
		ExpanderPop:	
			"####" "#" 10
			TNT1 A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
			TNT1 A 0 A_PlaySound("duke/explosion", 6, 1.0)
			TNT1 A 1 ACS_ExecuteWithResult(215,36,2)
			TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
			TNT1 A 0 A_Jump(96,2)
			TNT1 A 0 A_GiveToTarget("DukeGibTaunt", 1)
			TNT1 A 0 A_SetScale (1.0, 1.0)
			TNT1 A 0 A_UnsetSolid
			TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
			TNT1 A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
			TNT1 A 0 A_GiveToTarget("DukeGibTaunt",1)
			TNT1 A 1
			Stop
		Death.ExpanderDMGCoop:
		XDeath.ExpanderDMGCoop:
			HL00 A 0
			"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
			"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
			"####" "#" 0 A_PlaySound("duke/expand")
			Goto ExpanderLoopCoop
		ExpanderLoopCoop:
			"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
			"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
			"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
			"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
			"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
			"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
			loop
		ExpanderPopCoop:	
			"####" "#" 10
			TNT1 A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
			TNT1 A 0 A_PlaySound("duke/explosion", 6, 1.0)
			TNT1 A 1 ACS_ExecuteWithResult(215,36,2)
			TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)
			TNT1 A 0 A_Jump(96,2)
			TNT1 A 0 A_GiveToTarget("DukeGibTaunt", 1)
			TNT1 A 0 A_SetScale (1.0, 1.0)
			TNT1 A 0 A_UnsetSolid
			TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
			TNT1 A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
			TNT1 A 0 A_GiveToTarget("DukeGibTaunt",1)
			TNT1 A 1
			Stop
	}
}

Actor HECU_Grunt1_FollowOpp_MP5 : HECU_Grunt1_StayOpp_MP5
{
	-FRIENDLY
	States
	{
		Active:
			HL14 R 0 A_Playsound("OppGrunt/Stay")
			HL14 ABCDEFGHIJKLMNOPQR 4
			HL14 R 0 A_SpawnItemEx("HECU_Grunt1_StayOpp_MP5",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
		Spawn:
			HL00 A 0
			HL00 A 0 A_GiveInventory("HLSpeedTokens", 8)
			HL00 A 0 A_ChangeFlag("Friendly", true)
			HL00 A 0 A_GiveInventory("AllyToken", 1)
			HL00 A 0 A_JumpIfInventory("AlreadySpawned",1,"SpawnStandard")
			HL00 A 0 ACS_ExecuteAlways(668,0,1,0)
			HL00 A 0 A_GiveInventory("AlreadySpawned",1)
			HL00 A 0 A_JumpIfInventory("InvisibleToken",1,2)
			HL00 A 0 A_Jump(256,2)
			HL00 A 0 A_ChangeFlag("STEALTH",1)
		SpawnStandard:
			HL00 A 0 A_ClearTarget
			HL00 A 0 A_ChangeFlag("Friendly", 0)
			HL00 A 0 A_ChangeFlag("NEVERTARGET", true)
			HL00 A 0 A_Jump(128,"Spawn2")
		Spawn1:	
			HL00 A 0 A_Jump(48,"IdleAnim")
			HL00 A 0 A_Jump(248,2)
			TNT1 A 0 A_Playsound("OppGrunt/Idle", CHAN_VOICE)
			HL00 A 0 A_ChangeFLag("FRIENDLY", 1)	
			HL00 ABCDEFGH 4 A_LookEx(0, 0, 0, 0, 360, "See2")
			HL00 A 0 A_ChangeFLag("FRIENDLY", 0)
			HL00 ABCDEFGH 4 A_LookEx(0, 0, 0, 0, 360, "FollowPlayer")
			Loop
		Spawn2:
			HL14 A 0 A_Jump(48,"IdleAnim")
			TNT1 A 0 A_Jump(248,2)
			TNT1 A 0 A_Playsound("OppGrunt/Idle", CHAN_VOICE)
			HL14 A 0 A_ChangeFLag("FRIENDLY", 1)	
			HL14 ABCDEFGHIJKLMNOPQR 4 A_LookEx(0, 0, 0, 0, 360)
			HL14 A 0 A_ChangeFLag("FRIENDLY", 0)
			HL14 ABCDEFGHIJKLMNOPQR 4 A_LookEx(0, 0, 0, 0, 360, "FOLLOWPLAYER")
			Loop
		IdleAnim:
			HL22 A 0 ACS_NamedExecuteAlways("HalfLifeAllyWalkRunSpeed", 0, 0)
			HL22 A 0 A_ChangeFLag("FRIENDLY", 1)	
			HL22 A 0 A_JumpIfHealthLower(50,"LimpWalk")
			HL22 A 0 A_LookEx(0, 0, 0, 0, 360)
			HL22 AB 2 A_Wander
			HL22 C 0 A_LookEx(0, 0, 0, 0, 360)
			HL22 CD 2 A_Wander
			HL22 E 0 A_LookEx(0, 0, 0, 0, 360)	
			HL22 EF 2 A_Wander
			HL22 G 0 A_LookEx(0, 0, 0, 0, 360)	
			HL22 GH 2 A_Wander
			HL22 I 0 A_LookEx(0, 0, 0, 0, 360)
			HL22 IJ 2 A_Wander
			HL22 K 0 A_LookEx(0, 0, 0, 0, 360)	
			HL22 KL 2 A_Wander
			HL22 M 0 A_LookEx(0, 0, 0, 0, 360)	
			HL22 MN 2 A_Wander
			HL22 O 0 A_LookEx(0, 0, 0, 0, 360)
			HL22 OP 2 A_Wander
			HL22 Q 0 A_LookEx(0, 0, 0, 0, 360)	
			HL22 QR 2 A_Wander
			HL22 S 0 A_LookEx(0, 0, 0, 0, 360)
			HL22 STU 2 A_Wander
			HL22 A 0 A_LookEx(0, 0, 0, 0, 360)
			HL22 A 0 A_Jump(128, "SpawnStandard")
			Loop
		LimpWalk:
			HL17 AB 2 A_Wander
			HL17 C 0 A_LookEx(0, 0, 0, 0, 360)
			HL17 CD 2 A_Wander
			HL17 E 0 A_LookEx(0, 0, 0, 0, 360)		
			HL17 EF 2 A_Wander
			HL17 G 0 A_LookEx(0, 0, 0, 0, 360)		
			HL17 GH 2 A_Wander
			HL17 I 0 A_LookEx(0, 0, 0, 0, 360)		
			HL17 IJ 2 A_Wander
			HL17 K 0 A_LookEx(0, 0, 0, 0, 360)		
			HL17 KL 2 A_Wander
			HL17 M 0 A_LookEx(0, 0, 0, 0, 360)	
			HL17 MN 2 A_Wander
			HL17 O 0 A_LookEx(0, 0, 0, 0, 360)	
			HL17 O 2 A_Wander
			HL17 A 0 A_LookEx(0, 0, 0, 0, 360)	
			HL17 A 0 A_Jump(128, "SpawnStandard")
			Loop
		SetSee:
			TNT1 A 0 A_ChangeFlag(FRIGHTENED,0)			
			Goto SeeCheck
		SeeCheck:
			HL01 A 0 A_ChangeFLag("FRIENDLY", 1)
			HL01 A 0 ACS_NamedExecuteAlways("HalfLifeAllyWalkRunSpeed", 0, 1)	
			HL01 A 0 A_JumpIf(ACS_ExecuteWithResult(2684,1) == 1,"FollowPlayer")
			HL01 A 0 A_JumpIf(ACS_ExecuteWithResult(2684,1) == 2,"See")
			HL01 A 0 A_JumpIfInTargetInventory("AllyToken", 1, "IGNOREHELPERS")
			HL01 A 0 A_ChangeFLag("FRIENDLY", 0)
			Goto SpawnStandard
		See:
			HL01 A 0 ACS_NamedExecuteAlways("HalfLifeAllyWalkRunSpeed", 0, 1)	
			HL01 A 0 A_JumpIf(ACS_ExecuteWithResult(2684,1) == 1,"FollowPlayer")
			HL01 A 0 A_JumpIfInTargetInventory("AllyToken", 1, "IGNOREHELPERS")
			HL01 A 0 A_ChangeFLag("FRIENDLY", 1)
			HL01 A 0 A_FaceTarget
			HL01 A 0 A_JumpIfHealthLower(50,11)
			HL01 ABCDEFGHI 2 A_Chase(0, "MISSILE")
			HL01 A 0
			Goto SeeCheck
			HL16 ABCDEFGHI 2 A_Chase(0, "MISSILE")
			HL16 A 0
			Goto SeeCheck
		See2:
			HL01 A 0 ACS_NamedExecuteAlways("HalfLifeAllyWalkRunSpeed", 0, 1)
			HL01 A 0 A_JumpIf(ACS_ExecuteWithResult(2684,1) == 1,"FollowPlayer")
			HL01 A 0 A_JumpIfInTargetInventory("AllyToken", 1, "IGNOREHELPERS2")
			HL01 A 0 A_ChangeFLag("FRIENDLY", 1)
			HL01 A 0 A_FaceTarget
			HL01 A 0 A_JumpIfHealthLower(50,11)
			HL01 ABCDEFGHI 2 A_Chase(0, "MISSILE")
			HL01 A 0
			Goto SeeCheck
			HL16 ABCDEFGHI 2 A_Chase(0, "MISSILE")
			HL16 A 0
			Goto SeeCheck
		FOLLOWPLAYER:
			HL22 A 0 ACS_NamedExecuteAlways("HalfLifeAllyWalkRunSpeed", 0, 0)
			HL22 A 0 A_JumpIfHealthLower(50,"FOLLOWPLAYERLIMP")
			HL22 A 0 A_ChangeFLag("FRIENDLY", 0)
			HL22 A 0 A_JumpIfCloser(80, "STAND")
			HL22 A 0 A_FaceTarget
			HL22 A 0 A_JumpIf(ACS_ExecuteWithResult (2684, 2) == 1, "FollowRun")
			HL22 A 0 A_JumpIf(ACS_ExecuteWithResult(2684,1) != 2,2)
			HL22 A 0 A_ClearTarget
			HL22 A 0 A_JumpIFCloser(384, 1)
			Goto FollowRun
			HL22 A 0 A_ChangeFlag("NEVERTARGET", true)
			HL22 ABCD 3 A_Chase(0,0)
			HL22 E 0 A_JumpIfCloser(80, "STAND")			
			HL22 EFGH 3 A_Chase(0,0)
			HL22 I 0 A_JumpIfCloser(80, "STAND")
			HL22 IJKL 3 A_Chase(0,0)
			HL22 M 0 A_JumpIfCloser(80, "STAND")
			HL22 MNOP 3 A_Chase(0,0)
			HL22 Q 0 A_JumpIfCloser(80, "STAND")
			HL22 QRSTU 3 A_Chase(0,0)
			HL22 A 0 A_ChangeFlag("NEVERTARGET", false)
			GOTO SeeCheck	
		FOLLOWPLAYERLIMP:
			HL17 A 0 A_ChangeFLag("FRIENDLY", 0)
			HL17 A 0 A_JumpIfCloser(80, "STAND")
			HL17 A 0 A_FaceTarget
			HL17 A 0 A_JumpIf(ACS_ExecuteWithResult (2684, 2) == 1, "FollowRun")
			HL17 A 0 A_JumpIf(ACS_ExecuteWithResult(2684,1) != 2,2)
			HL17 A 0 A_ClearTarget
			HL17 A 0 A_JumpIFCloser(384, 1)
			Goto FollowRun
			HL17 A 0 A_ChangeFlag("NEVERTARGET", true)
			HL17 ABCD 3 A_Chase(0,0)
			HL17 E 0 A_JumpIfCloser(80, "STAND")			
			HL17 EFGH 3 A_Chase(0,0)
			HL17 I 0 A_JumpIfCloser(80, "STAND")
			HL17 IJKL 3 A_Chase(0,0)
			HL17 M 0 A_JumpIfCloser(80, "STAND")
			HL17 MNO 3 A_Chase(0,0)
			HL17 A 0 A_ChangeFlag("NEVERTARGET", false)
			GOTO SeeCheck	
		FOLLOWRUN:
			HL01 A 0 ACS_NamedExecuteAlways("HalfLifeAllyWalkRunSpeed", 0, 1)
			HL22 A 0 A_JumpIfHealthLower(50,"FOLLOWRUNLIMP")
			HL01 A 0 A_ChangeFLag("FRIENDLY", 0)
			HL22 A 0 A_ChangeFlag("NEVERTARGET", true)
			HL01 A 0 A_JumpIfCloser(80, "STAND")
			HL01 AB 0 A_FaceTarget
			HL01 C 0 A_JumpIf(ACS_ExecuteWithResult(2684,1) == 1,2)
			HL01 C 0 A_ClearTarget
			HL01 CD 2 A_Chase(0,0)
			HL01 E 0 A_JumpIfCloser(80, "STAND")	
			HL01 EF 2 A_Chase(0,0)
			HL01 G 0 A_JumpIfCloser(80, "STAND")
			HL01 GH 2 A_Chase(0,0)
			HL01 I 0 A_JumpIfCloser(80, "STAND")
			HL01 I 2 A_Chase(0,0)
			HL22 A 0 A_ChangeFlag("NEVERTARGET", false)
			GOTO SeeCheck
		FOLLOWRUNLIMP:
			HL16 A 0 A_ChangeFLag("FRIENDLY", 0)
			HL16 A 0 A_JumpIfCloser(80, "STAND")
			HL16 AB 0 A_FaceTarget
			HL16 C 0 A_JumpIf(ACS_ExecuteWithResult(2684,1) == 1,2)
			HL16 C 0 A_ClearTarget
			HL16 CD 2 A_Chase(0,0)
			HL16 E 0 A_JumpIfCloser(80, "STAND")	
			HL16 EF 2 A_Chase(0,0)
			HL16 G 0 A_JumpIfCloser(80, "STAND")
			HL16 GH 2 A_Chase(0,0)
			HL16 I 0 A_JumpIfCloser(80, "STAND")
			HL16 I 2 A_Chase(0,0)
			GOTO SeeCheck
		IGNOREHELPERS: 
			//Look until you find something that is not a helper. If the other possible target is the player, go towards it.
			HL14 ABCDEFGHIJKLMNOPQR 4
			HL14 A 0 A_JumpIf(ACS_ExecuteWithResult(2684,1) != 2,"FollowPlayer")
			HL14 A 0 A_ClearTarget
			Goto Spawn1
		IGNOREHELPERS2: 
			//Look until you find something that is not a helper. If the other possible target is the player, go towards it.
			HL00 ABCDEFGH 4
			HL00 A 0 A_JumpIf(ACS_ExecuteWithResult(2684,1) != 2,"FollowPlayer")
			HL00 A 0 A_ClearTarget
			Goto Spawn2
		LimpRun:
			HL16 ABCDEFGHI 2 A_Chase
			Loop
		CHECKPLAYERDISTANCE:
			TNT1 A 0 A_JumpIfCloser(80, "STAND") //How far the player needs to be to teleport to it.
			GOTO FOLLOWPLAYER		
		STAND:
			//In this state it'll be close to the player, therefore make it friendly again so it starts looking for monsters again.
			TNT1 A 0 A_ChangeFLag("FRIENDLY", 1)
			TNT1 A 0 A_ClearTarget				
			GOTO SpawnStandard
		Missile:
			TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(2684,1) == 1,"CHECKPLAYERDISTANCE")
			TNT1 A 0 A_JumpIfInTargetInventory("AllyToken", 1, "IGNOREHELPERS")
			TNT1 A 0 A_ChangeFlag("NEVERTARGET", false)
			TNT1 A 0 A_Jump(180,"StartFiring")
			TNT1 A 0 A_JumpIfCloser(328,"ThrowGrenade")
			Goto StartFiring
		Melee:
			TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(2684,1) == 1,"CHECKPLAYERDISTANCE")
			TNT1 A 0 A_JumpIfInTargetInventory("AllyToken", 1, "IGNOREHELPERS")
			TNT1 A 0 A_Jump(41,"PlaceGrenade")
			Goto Kick	
		StartFiring:	
			HL02 A 0 A_FaceTarget
			TNT1 A 0 A_JumpIfInventory("HECU_MP5_DummyReload",50,"Reload")
			TNT1 A 0 A_GiveInventory("HECU_MP5_DummyReload",1)			
			TNT1 A 0 A_PlaySound("MP5/FireBurst")
			TNT1 A 0 A_AlertMonsters(1024,AMF_TARGETEMITTER)
			TNT1 A 0 A_CustomMissile("HLBullet_Friendly",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_SpawnItemEx("HLMGMuzzleFlash",36,4,44,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 ABCDEF 1
			HL02 A 0 A_FaceTarget
			TNT1 A 0 A_JumpIfInventory("HECU_MP5_DummyReload",50,"Reload")
			TNT1 A 0 A_AlertMonsters(1024,AMF_TARGETEMITTER)
			TNT1 A 0 A_GiveInventory("HECU_MP5_DummyReload",1)			
			TNT1 A 0 A_CustomMissile("HLBullet_Friendly",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_SpawnItemEx("HLMGMuzzleFlash",36,4,44,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 ABCDEF 1
			HL02 A 0 A_FaceTarget
			TNT1 A 0 A_JumpIfInventory("HECU_MP5_DummyReload",50,"Reload")
			TNT1 A 0 A_AlertMonsters(1024,AMF_TARGETEMITTER)
			TNT1 A 0 A_GiveInventory("HECU_MP5_DummyReload",1)			
			TNT1 A 0 A_CustomMissile("HLBullet_Friendly",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_SpawnItemEx("HLMGMuzzleFlash",36,4,44,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 ABCDEF 1
			TNT1 A 0 A_JumpIfTargetInLOS("KeepFiring",0,JLOSF_DEADNOJUMP)
			Goto Retaliate
		KeepFiring:
			HL02 A 5
			TNT1 A 0 A_CPosRefire
			Goto StartFiring+1
		Retaliate:
			TNT1 A 0 A_ClearTarget
			TNT1 A 0
			Goto SpawnStandard			
		Reload:
			TNT1 A 0 A_ChangeFlag(NOPAIN,1)
			TNT1 A 0 A_TakeInventory("HECU_MP5_DummyReload",50)
			HL19 ABCDEFGHIJKLMNOPQRSTUVWX 2
			TNT1 A 0 A_ChangeFlag(NOPAIN,0)			
			Goto SeeCheck
		ThrowGrenade:
			TNT1 A 0 A_Playsound("OppGrunt/Throw", CHAN_VOICE)
			HL13 ABCDEFGHIJKLM 3 A_FaceTarget
			TNT1 A 0 A_CustomMissile("HLHECUGrenade", 32)
			HL13 NOPQRS 2
			TNT1 A 0 A_Jump(100,"RunAway")
			TNT1 A 0 A_JumpIfCloser(464,"Cover")
			TNT1 A 0 A_Jump(164,"RunAway")			
			TNT1 A 0 A_JumpIfCloser(729,"Cover")			
			Goto SeeCheck
		RunAway:
			TNT1 A 0 A_ChangeFlag(FRIGHTENED,1)
			HL01 ABCDEFGHI 2 A_Chase("","",CHF_NOPLAYACTIVE)
			HL01 ABCDEFGHI 2 A_Chase("","",CHF_NOPLAYACTIVE)
			HL01 ABCDEFGHI 2 A_Chase("","",CHF_NOPLAYACTIVE)
			HL01 A 0 A_Jump(24,"SetCover")
			HL01 ABCDEFGHI 2 A_Chase("","",CHF_NOPLAYACTIVE)
			HL01 A 0 A_Jump(12,"SetSee")
			HL01 ABCDEFGHI 2 A_Chase("","",CHF_NOPLAYACTIVE)			
			TNT1 A 0 A_ChangeFlag(FRIGHTENED,0)			
			Goto SeeCheck
		SetCover:
			TNT1 A 0 A_ChangeFlag(FRIGHTENED,0)			
			Goto Cover
		Cover:
			TNT1 A 0 A_Playsound("OppGrunt/Grenade", CHAN_VOICE)
			HL21 ABCDEFGHIJKLMNOPQRSTU 2
			Goto SeeCheck
		Kick:	
			HL15 ABCD 4 A_FaceTarget
			HL15 E 3 A_CustomMeleeAttack(Random(1,10)*2,"","")
			HL15 FGHIJK 2
			Goto SeeCheck
		Pain:
			HL18 A 0 A_ChangeFlag("NEVERTARGET", false)
			TNT1 A 0 A_Pain
			HL18 ABCDEF 3
			TNT1 A 0 A_ChangeFlag(FRIGHTENED,0)
			Goto SeeCheck
	}
}

Actor HECU_Grunt2_StayOpp_MP5 : HECU_Grunt1_StayOpp_MP5 
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/FollowAdrian")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Grunt2_FollowOpp_MP5",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Grunt2_FollowOpp_MP5 : HECU_Grunt1_FollowOpp_MP5
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/Stay")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Grunt2_StayOpp_MP5",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Shotgunner1_StayOpp_MP5 : HECU_Grunt1_StayOpp_MP5
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/FollowAdrian")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Shotgunner1_FollowOpp_MP5",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Shotgunner1_FollowOpp_MP5 : HECU_Grunt1_FollowOpp_MP5
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/Stay")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Shotgunner1_StayOpp_MP5",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Shotgunner2_StayOpp_MP5 : HECU_Grunt1_StayOpp_MP5
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/FollowAdrian")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Shotgunner2_FollowOpp_MP5",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Shotgunner2_FollowOpp_MP5 : HECU_Grunt1_FollowOpp_MP5
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/Stay")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Shotgunner1_StayOpp_MP5",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Mask_StayOpp_MP5 : HECU_Grunt1_StayOpp_MP5
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/FollowAdrian")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Mask_FollowOpp_MP5",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Mask_FollowOpp_MP5 : HECU_Grunt1_FollowOpp_MP5
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/Stay")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Mask_StayOpp_MP5",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Commander1_StayOpp_MP5 : HECU_Grunt1_StayOpp_MP5
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/FollowAdrian")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Commander1_FollowOpp_MP5",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
		ThrowGrenade:
			TNT1 A 0 A_JumpIfInventory("HECU_M203_DummyReload",1,"ReloadGrenade")
			TNT1 A 0 A_Playsound("OppGrunt/Throw", CHAN_VOICE)
			HL13 ABCDEF 3 A_FaceTarget
			HL13 G 0 A_AlertMonsters(1024,AMF_TARGETEMITTER)
			TNT1 A 0 A_PlaySound("halflife/mp5_shootgrenade")
			TNT1 A 0 A_CustomMissile("HLHECUM203Grenade", 32)
			HL13 GHIJKLMNOP 2
			TNT1 A 0 A_GiveInventory("HECU_M203_DummyReload",1)
			TNT1 A 0 A_JumpIfCloser(464,"Cover")					
			Goto SpawnStandard
	}
}
Actor HECU_Commander1_FollowOpp_MP5 : HECU_Grunt1_FollowOpp_MP5
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/Stay")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Commander1_StayOpp_MP5",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
		ThrowGrenade:
			TNT1 A 0 A_JumpIfInventory("HECU_M203_DummyReload",1,"ReloadGrenade")
			TNT1 A 0 A_Playsound("OppGrunt/Throw", CHAN_VOICE)
			HL13 ABCDEF 3 A_FaceTarget
			HL13 G 0 A_AlertMonsters(1024,AMF_TARGETEMITTER)
			TNT1 A 0 A_PlaySound("halflife/mp5_shootgrenade")
			TNT1 A 0 A_CustomMissile("HLHECUM203Grenade", 32)
			HL13 GHIJKLMNOP 2
			TNT1 A 0 A_GiveInventory("HECU_M203_DummyReload",1)
			TNT1 A 0 A_JumpIfCloser(464,"Cover")					
			Goto SeeCheck
	}
}
Actor HECU_Commander2_StayOpp_MP5 : HECU_Grunt1_StayOpp_MP5
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/FollowAdrian")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Commander2_FollowOpp_MP5",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
		ThrowGrenade:
			TNT1 A 0 A_JumpIfInventory("HECU_M203_DummyReload",1,"ReloadGrenade")
			TNT1 A 0 A_Playsound("OppGrunt/Throw", CHAN_VOICE)
			HL13 ABCDEF 3 A_FaceTarget
			HL13 G 0 A_AlertMonsters(1024,AMF_TARGETEMITTER)
			TNT1 A 0 A_PlaySound("halflife/mp5_shootgrenade")
			TNT1 A 0 A_CustomMissile("HLHECUM203Grenade", 32)
			HL13 GHIJKLMNOP 2
			TNT1 A 0 A_GiveInventory("HECU_M203_DummyReload",1)
			TNT1 A 0 A_JumpIfCloser(464,"Cover")					
			Goto SpawnStandard
	}
}
Actor HECU_Commander2_FollowOpp_MP5 : HECU_Grunt1_FollowOpp_MP5
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/Stay")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Commander2_StayOpp_MP5",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
		ThrowGrenade:
			TNT1 A 0 A_JumpIfInventory("HECU_M203_DummyReload",1,"ReloadGrenade")
			TNT1 A 0 A_Playsound("OppGrunt/Throw", CHAN_VOICE)
			HL13 ABCDEF 3 A_FaceTarget
			HL13 G 0 A_AlertMonsters(1024,AMF_TARGETEMITTER)
			TNT1 A 0 A_PlaySound("halflife/mp5_shootgrenade")
			TNT1 A 0 A_CustomMissile("HLHECUM203Grenade", 32)
			HL13 GHIJKLMNOP 2
			TNT1 A 0 A_GiveInventory("HECU_M203_DummyReload",1)
			TNT1 A 0 A_JumpIfCloser(464,"Cover")					
			Goto SeeCheck
	}
}

Actor HECU_Grunt1_StayOpp_Shotgun : HECU_Grunt1_StayOpp_MP5 
{ 
	DropItem "HL_HECU_ShotgunDrop", 96, 1
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/FollowAdrian")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Grunt1_FollowOpp_Shotgun",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
		Missile:
			TNT1 A 0 A_Jump(180,"StartFiring")
			TNT1 A 0 A_JumpIfCloser(328,"ThrowGrenade")
		StartFiring:	
			HL02 A 0 A_FaceTarget
			TNT1 A 0 A_JumpIfInventory("HECU_Shotgun_DummyReload",8,"Reload")
			TNT1 A 0 A_GiveInventory("HECU_Shotgun_DummyReload",1)			
			TNT1 A 0 A_PlaySound("halflife/shotgun_shoot")
			TNT1 A 0 A_AlertMonsters(1024,AMF_TARGETEMITTER)
			TNT1 A 0 A_CustomMissile("HLBullet_Friendly",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_CustomMissile("HLBullet_Friendly",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_CustomMissile("HLBullet_Friendly",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_CustomMissile("HLBullet_Friendly",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_CustomMissile("HLBullet_Friendly",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_CustomMissile("HLBullet_Friendly",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_SpawnItemEx("HLMuzzleFlash_Enemy",36,4,44,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 ABCDEF 4
			Goto Retaliate	
		Reload:
			TNT1 A 0 A_ChangeFlag(NOPAIN,1)
			TNT1 A 0 A_TakeInventory("HECU_Shotgun_DummyReload",8)
			HL19 ABCDEFGHIJKLMNOPQRSTUVWX 2
			TNT1 A 0 A_ChangeFlag(NOPAIN,0)			
			Goto SeeCheck
	}
}

Actor HECU_Grunt1_FollowOpp_Shotgun : HECU_Grunt1_FollowOpp_MP5 
{
	DropItem "HL_HECU_ShotgunDrop", 96, 1
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/Stay")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Grunt1_StayOpp_Shotgun",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
		Missile:
			TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(2684,1) == 1,"CHECKPLAYERDISTANCE")
			TNT1 A 0 A_JumpIfInTargetInventory("AllyToken", 1, "IGNOREHELPERS")
			TNT1 A 0 A_Jump(180,"StartFiring")
			TNT1 A 0 A_JumpIfCloser(328,"ThrowGrenade")
		StartFiring:	
			HL02 A 0 A_FaceTarget
			TNT1 A 0 A_JumpIfInventory("HECU_Shotgun_DummyReload",8,"Reload")
			TNT1 A 0 A_GiveInventory("HECU_Shotgun_DummyReload",1)			
			TNT1 A 0 A_PlaySound("halflife/shotgun_shoot")
			TNT1 A 0 A_AlertMonsters(1024,AMF_TARGETEMITTER)
			TNT1 A 0 A_CustomMissile("HLBullet_Friendly",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_CustomMissile("HLBullet_Friendly",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_CustomMissile("HLBullet_Friendly",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_CustomMissile("HLBullet_Friendly",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_CustomMissile("HLBullet_Friendly",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_CustomMissile("HLBullet_Friendly",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_SpawnItemEx("HLMuzzleFlash_Enemy",36,4,44,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 ABCDEF 4
			Goto Retaliate	
		Retaliate:
			TNT1 A 0 A_ClearTarget
			TNT1 A 0
			Goto SeeCheck
		Reload:
			TNT1 A 0 A_ChangeFlag(NOPAIN,1)
			TNT1 A 0 A_TakeInventory("HECU_Shotgun_DummyReload",8)
			HL19 ABCDEFGHIJKLMNOPQRSTUVWX 2
			TNT1 A 0 A_ChangeFlag(NOPAIN,0)			
			Goto SeeCheck
	}
}

Actor HECU_Grunt2_StayOpp_Shotgun : HECU_Grunt1_StayOpp_Shotgun
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/FollowAdrian")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Grunt2_FollowOpp_Shotgun",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Grunt2_FollowOpp_Shotgun : HECU_Grunt1_FollowOpp_Shotgun
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/Stay")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Grunt2_StayOpp_Shotgun",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Shotgunner1_StayOpp_Shotgun : HECU_Grunt1_StayOpp_Shotgun
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/FollowAdrian")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Shotgunner1_FollowOpp_Shotgun",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Shotgunner1_FollowOpp_Shotgun : HECU_Grunt1_FollowOpp_Shotgun
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/Stay")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Shotgunner1_StayOpp_Shotgun",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Shotgunner2_StayOpp_Shotgun : HECU_Grunt1_StayOpp_Shotgun
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/FollowAdrian")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Shotgunner2_FollowOpp_Shotgun",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Shotgunner2_FollowOpp_Shotgun : HECU_Grunt1_FollowOpp_Shotgun
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/Stay")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Shotgunner2_StayOpp_Shotgun",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Mask_StayOpp_Shotgun : HECU_Grunt1_StayOpp_Shotgun
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/FollowAdrian")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Mask_FollowOpp_Shotgun",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Mask_FollowOpp_Shotgun : HECU_Grunt1_FollowOpp_Shotgun
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/Stay")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Mask_StayOpp_Shotgun",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Commander1_StayOpp_Shotgun : HECU_Grunt1_StayOpp_Shotgun
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/FollowAdrian")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Commander1_FollowOpp_Shotgun",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Commander1_FollowOpp_Shotgun : HECU_Grunt1_FollowOpp_Shotgun
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/Stay")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Commander1_StayOpp_Shotgun",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Commander2_StayOpp_Shotgun : HECU_Grunt1_StayOpp_Shotgun
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/FollowAdrian")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Commander2_FollowOpp_Shotgun",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Commander2_FollowOpp_Shotgun : HECU_Grunt1_FollowOpp_Shotgun
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/Stay")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Commander2_StayOpp_Shotgun",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}

Actor HECU_Grunt1_StayOpp_Saw : HECU_Grunt1_StayOpp_MP5 
{ 
	DropItem "HL_HECU_SawDrop", 96, 1
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/FollowAdrian")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Grunt1_FollowOpp_Saw",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
		Missile:
			TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(2684,1) == 1,"CHECKPLAYERDISTANCE")
			TNT1 A 0 A_JumpIfInTargetInventory("AllyToken", 1, "IGNOREHELPERS")
			TNT1 A 0 A_Jump(180,"StartFiring")
			TNT1 A 0 A_JumpIfCloser(328,"ThrowGrenade")
		StartFiring:	
			HL02 A 0 A_FaceTarget
			TNT1 A 0 A_JumpIfInventory("HECU_MP5_DummyReload",50,"Reload")
			TNT1 A 0 A_AlertMonsters(1024,AMF_TARGETEMITTER)
			TNT1 A 0 A_GiveInventory("HECU_MP5_DummyReload",1)			
			TNT1 A 0 A_PlaySound("saw/fire")
			TNT1 A 0 A_CustomMissile("HLBullet_Friendly",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_SpawnItemEx("HLMGMuzzleFlash",36,4,44,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 AB 1 A_FaceTarget
			TNT1 A 0 A_JumpIfInventory("HECU_MP5_DummyReload",50,"Reload")
			TNT1 A 0 A_AlertMonsters(1024,AMF_TARGETEMITTER)
			TNT1 A 0 A_GiveInventory("HECU_MP5_DummyReload",1)			
			TNT1 A 0 A_PlaySound("saw/fire")
			TNT1 A 0 A_CustomMissile("HLBullet_Friendly",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_SpawnItemEx("HLMGMuzzleFlash",36,4,44,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 CD 1 A_FaceTarget
			TNT1 A 0 A_JumpIfInventory("HECU_MP5_DummyReload",50,"Reload")
			TNT1 A 0 A_AlertMonsters(1024,AMF_TARGETEMITTER)
			TNT1 A 0 A_GiveInventory("HECU_MP5_DummyReload",1)			
			TNT1 A 0 A_PlaySound("saw/fire")
			TNT1 A 0 A_CustomMissile("HLBullet_Friendly",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_SpawnItemEx("HLMGMuzzleFlash",36,4,44,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 EF 1 A_FaceTarget
			TNT1 A 0 A_JumpIfTargetInLOS("KeepFiring",0,JLOSF_DEADNOJUMP)
			Goto Retaliate	
		KeepFiring:
			TNT1 A 0 A_CPosRefire
			Goto StartFiring+1
		Death:
			TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)		
			TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)					
			TNT1 A 0 A_Jump(128,"Death2","Death3","Death4","Death5","Death6")
			TNT1 A 0 A_NoBlocking
			TNT1 A 0 A_Scream
			HL07 ABCDEFGHI 4
			HL07 I -1
			Stop
		Death5:
			TNT1 A 0 A_NoBlocking
			TNT1 A 0 A_Scream
			HL11 ABCDEFGHIJKL 4
			HL11 L -1
			Stop
	}
}

Actor HECU_Grunt1_FollowOpp_Saw : HECU_Grunt1_FollowOpp_MP5 
{
	DropItem "HL_HECU_SawDrop", 96, 1
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/Stay")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Grunt1_StayOpp_Saw",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
		Missile:
			TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(2684,1) == 1,"CHECKPLAYERDISTANCE")
			TNT1 A 0 A_JumpIfInTargetInventory("AllyToken", 1, "IGNOREHELPERS")
			TNT1 A 0 A_Jump(180,"StartFiring")
			TNT1 A 0 A_JumpIfCloser(328,"ThrowGrenade")
		StartFiring:	
			HL02 A 0 A_FaceTarget
			TNT1 A 0 A_JumpIfInventory("HECU_MP5_DummyReload",50,"Reload")
			TNT1 A 0 A_AlertMonsters(1024,AMF_TARGETEMITTER)
			TNT1 A 0 A_GiveInventory("HECU_MP5_DummyReload",1)			
			TNT1 A 0 A_PlaySound("saw/fire")
			TNT1 A 0 A_CustomMissile("HLBullet_Friendly",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_SpawnItemEx("HLMGMuzzleFlash",36,4,44,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 AB 1 A_FaceTarget
			TNT1 A 0 A_JumpIfInventory("HECU_MP5_DummyReload",50,"Reload")
			TNT1 A 0 A_AlertMonsters(1024,AMF_TARGETEMITTER)
			TNT1 A 0 A_GiveInventory("HECU_MP5_DummyReload",1)			
			TNT1 A 0 A_PlaySound("saw/fire")
			TNT1 A 0 A_CustomMissile("HLBullet_Friendly",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_SpawnItemEx("HLMGMuzzleFlash",36,4,44,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 CD 1 A_FaceTarget
			TNT1 A 0 A_JumpIfInventory("HECU_MP5_DummyReload",50,"Reload")
			TNT1 A 0 A_AlertMonsters(1024,AMF_TARGETEMITTER)
			TNT1 A 0 A_GiveInventory("HECU_MP5_DummyReload",1)			
			TNT1 A 0 A_PlaySound("saw/fire")
			TNT1 A 0 A_CustomMissile("HLBullet_Friendly",44,4,angle+frandom(-8.0,8.0),CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,frandom(-8.0,8.0))
			TNT1 A 0 A_SpawnItemEx("HLMGMuzzleFlash",36,4,44,0,0,0,0,SXF_NOCHECKPOSITION)
			HL02 EF 1 A_FaceTarget
			TNT1 A 0 A_JumpIfTargetInLOS("KeepFiring",0,JLOSF_DEADNOJUMP)
			Goto Retaliate	
		KeepFiring:
			TNT1 A 0 A_CPosRefire
			Goto StartFiring+1
		Retaliate:
			TNT1 A 0 A_ClearTarget
			TNT1 A 0
			Goto SeeCheck
		Death:
			TNT1 A 0 ACS_NamedExecuteAlways("Samsara_KillCount", 0, 0)		
			TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)					
			TNT1 A 0 A_Jump(128,"Death2","Death3","Death4","Death5","Death6")
			TNT1 A 0 A_NoBlocking
			TNT1 A 0 A_Scream
			HL07 ABCDEFGHI 4
			HL07 I -1
			Stop
		Death5:
			TNT1 A 0 A_NoBlocking
			TNT1 A 0 A_Scream
			HL11 ABCDEFGHIJKL 4
			HL11 L -1
			Stop
	}
}

Actor HECU_Grunt2_StayOpp_Saw : HECU_Grunt1_StayOpp_Saw
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/FollowAdrian")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Grunt2_FollowOpp_Saw",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Grunt2_FollowOpp_Saw : HECU_Grunt1_FollowOpp_Saw
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/Stay")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Grunt2_StayOpp_Saw",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Shotgunner1_StayOpp_Saw : HECU_Grunt1_StayOpp_Saw
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/FollowAdrian")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Shotgunner1_FollowOpp_Saw",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Shotgunner1_FollowOpp_Saw : HECU_Grunt1_FollowOpp_Saw
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/Stay")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Shotgunner1_StayOpp_Saw",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Shotgunner2_StayOpp_Saw : HECU_Grunt1_StayOpp_Saw
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/FollowAdrian")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Shotgunner2_FollowOpp_Saw",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Shotgunner2_FollowOpp_Saw : HECU_Grunt1_FollowOpp_Saw
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/Stay")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Shotgunner2_StayOpp_Saw",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Mask_StayOpp_Saw : HECU_Grunt1_StayOpp_Saw
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/FollowAdrian")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Mask_FollowOpp_Saw",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Mask_FollowOpp_Saw : HECU_Grunt1_FollowOpp_Saw
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/Stay")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Mask_StayOpp_Saw",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Commander1_StayOpp_Saw : HECU_Grunt1_StayOpp_Saw
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/FollowAdrian")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Commander1_FollowOpp_Saw",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Commander1_FollowOpp_Saw : HECU_Grunt1_FollowOpp_Saw
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/Stay")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Commander1_StayOpp_Saw",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Commander2_StayOpp_Saw : HECU_Grunt1_StayOpp_Saw
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/FollowAdrian")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Commander2_FollowOpp_Saw",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}
Actor HECU_Commander2_FollowOpp_Saw : HECU_Grunt1_FollowOpp_Saw
{ 
	States
	{
		Active:
			TNT1 A 0 A_Playsound("OppGrunt/Stay")
			HL14 ABCDEFGHIJKLMNOPQR 4
			TNT1 A 0 A_SpawnItemEx("HECU_Commander2_StayOpp_Saw",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
			stop
	}
}

Actor HECU_FGrunt_Opp_Small : RandomSpawner
{
	DropItem "HECU_Grunt1_StayOpp_MP5", 255, 10
	DropItem "HECU_Grunt2_StayOpp_MP5", 255, 10
	DropItem "HECU_Grunt1_StayOpp_Shotgun", 255, 5
	DropItem "HECU_Grunt2_StayOpp_Shotgun", 255, 5
	DropItem "HECU_Shotgunner1_StayOpp_MP5", 255, 6
	DropItem "HECU_Shotgunner2_StayOpp_MP5", 255, 6
	DropItem "HECU_Shotgunner1_StayOpp_Shotgun", 255, 3
	DropItem "HECU_Shotgunner2_StayOpp_Shotgun", 255, 3
	DropItem "HECU_Mask_StayOpp_MP5", 255, 8
	DropItem "HECU_Mask_StayOpp_Shotgun", 255, 4
	DropItem "HECU_Commander1_StayOpp_MP5", 255, 3
	DropItem "HECU_Commander2_StayOpp_MP5", 255, 3
	DropItem "HECU_Commander1_StayOpp_Shotgun", 255, 2
	DropItem "HECU_Commander2_StayOpp_Shotgun", 255, 2
}

Actor HECU_FGrunt_Opp_MG : RandomSpawner
{
	DropItem "HECU_Grunt1_StayOpp_Saw", 255, 10
	DropItem "HECU_Grunt2_StayOpp_Saw", 255, 10
	DropItem "HECU_Shotgunner1_StayOpp_Saw", 255, 6
	DropItem "HECU_Shotgunner2_StayOpp_Saw", 255, 6
	DropItem "HECU_Mask_StayOpp_Saw", 255, 8
	DropItem "HECU_Commander1_StayOpp_Saw", 255, 3
	DropItem "HECU_Commander2_StayOpp_Saw", 255, 3
}

Actor HLBullet_Friendly : HLBullet
{
	
	Species "Player"
	Damage (random(5,10))
	+THRUSPECIES
	+MTHRUSPECIES
}